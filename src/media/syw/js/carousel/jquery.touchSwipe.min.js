/*
* touchSwipe - jQuery Plugin
* https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
* http://labs.skinkers.com/touchSwipe/
* http://plugins.jquery.com/project/touchSwipe
*
* Copyright (c) 2010 Matt Bryson (www.skinkers.com)
* Dual licensed under the MIT or GPL Version 2 licenses.
*
* $version: 1.6.6 
* 
* removed 'a' from 'excludedElements:"button, input, select, textarea, .noSwipe"'
* */

(function(e){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],e)}else{e(jQuery)}})(function(e){"use strict";function L(t){if(t&&t.allowPageScroll===undefined&&(t.swipe!==undefined||t.swipeStatus!==undefined)){t.allowPageScroll=u}if(t.click!==undefined&&t.tap===undefined){t.tap=t.click}if(!t){t={}}t=e.extend({},e.fn.swipe.defaults,t);return this.each(function(){var n=e(this);var r=n.data(C);if(!r){r=new A(this,t);n.data(C,r)}})}function A(d,k){function nt(t){if(jt())return;if(e(t.target).closest(k.excludedElements,z).length>0)return;var n=t.originalEvent?t.originalEvent:t;var r,i=x?n.touches[0]:n;W=b;if(x){X=n.touches.length}else{t.preventDefault()}P=0;H=null;R=null;B=0;j=0;F=0;I=1;q=0;V=Ut();U=Xt();Ht();if(!x||X===k.fingers||k.fingers===g||gt()){It(0,i);J=en();if(X==2){It(1,n.touches[1]);j=F=Jt(V[0].start,V[1].start)}if(k.swipeStatus||k.pinchStatus){r=ft(n,W)}}else{r=false}if(r===false){W=S;ft(n,W);return r}else{if(k.hold){et=setTimeout(e.proxy(function(){z.trigger("hold",[n.target]);if(k.hold){r=k.hold.call(z,n,n.target)}},this),k.longTapThreshold)}Ft(true)}return null}function rt(e){var t=e.originalEvent?e.originalEvent:e;if(W===E||W===S||Bt())return;var n,r=x?t.touches[0]:t;var i=qt(r);K=en();if(x){X=t.touches.length}if(k.hold)clearTimeout(et);W=w;if(X==2){if(j==0){It(1,t.touches[1]);j=F=Jt(V[0].start,V[1].start)}else{qt(t.touches[1]);F=Jt(V[0].end,V[1].end);R=Qt(V[0].end,V[1].end)}I=Kt(j,F);q=Math.abs(j-F)}if(X===k.fingers||k.fingers===g||!x||gt()){H=Zt(i.start,i.end);vt(e,H);P=Gt(i.start,i.end);B=$t();zt(H,P);if(k.swipeStatus||k.pinchStatus){n=ft(t,W)}if(!k.triggerOnTouchEnd||k.triggerOnTouchLeave){var s=true;if(k.triggerOnTouchLeave){var o=tn(this);s=nn(i.end,o)}if(!k.triggerOnTouchEnd&&s){W=at(w)}else if(k.triggerOnTouchLeave&&!s){W=at(E)}if(W==S||W==E){ft(t,W)}}}else{W=S;ft(t,W)}if(n===false){W=S;ft(t,W)}}function it(e){var t=e.originalEvent;if(x){if(t.touches.length>0){Pt();return true}}if(Bt()){X=G}K=en();B=$t();if(ht()||!ct()){W=S;ft(t,W)}else if(k.triggerOnTouchEnd||k.triggerOnTouchEnd==false&&W===w){e.preventDefault();W=E;ft(t,W)}else if(!k.triggerOnTouchEnd&&Tt()){W=E;lt(t,W,c)}else if(W===w){W=S;ft(t,W)}Ft(false);return null}function st(){X=0;K=0;J=0;j=0;F=0;I=1;Ht();Ft(false)}function ot(e){var t=e.originalEvent;if(k.triggerOnTouchLeave){W=at(E);ft(t,W)}}function ut(){z.unbind(A,nt);z.unbind(D,st);z.unbind(O,rt);z.unbind(M,it);if(_){z.unbind(_,ot)}Ft(false)}function at(e){var t=e;var n=dt();var r=ct();var i=ht();if(!n||i){t=S}else if(r&&e==w&&(!k.triggerOnTouchEnd||k.triggerOnTouchLeave)){t=E}else if(!r&&e==E&&k.triggerOnTouchLeave){t=S}return t}function ft(e,t){var n=undefined;if(Et()||wt()){n=lt(e,t,f)}else if((yt()||gt())&&n!==false){n=lt(e,t,l)}if(_t()&&n!==false){n=lt(e,t,h)}else if(Dt()&&n!==false){n=lt(e,t,p)}else if(Mt()&&n!==false){n=lt(e,t,c)}if(t===S){st(e)}if(t===E){if(x){if(e.touches.length==0){st(e)}}else{st(e)}}return n}function lt(u,a,d){var v=undefined;if(d==f){z.trigger("swipeStatus",[a,H||null,P||0,B||0,X,V]);if(k.swipeStatus){v=k.swipeStatus.call(z,u,a,H||null,P||0,B||0,X,V);if(v===false)return false}if(a==E&&bt()){z.trigger("swipe",[H,P,B,X,V]);if(k.swipe){v=k.swipe.call(z,u,H,P,B,X,V);if(v===false)return false}switch(H){case t:z.trigger("swipeLeft",[H,P,B,X,V]);if(k.swipeLeft){v=k.swipeLeft.call(z,u,H,P,B,X,V)}break;case n:z.trigger("swipeRight",[H,P,B,X,V]);if(k.swipeRight){v=k.swipeRight.call(z,u,H,P,B,X,V)}break;case r:z.trigger("swipeUp",[H,P,B,X,V]);if(k.swipeUp){v=k.swipeUp.call(z,u,H,P,B,X,V)}break;case i:z.trigger("swipeDown",[H,P,B,X,V]);if(k.swipeDown){v=k.swipeDown.call(z,u,H,P,B,X,V)}break}}}if(d==l){z.trigger("pinchStatus",[a,R||null,q||0,B||0,X,I,V]);if(k.pinchStatus){v=k.pinchStatus.call(z,u,a,R||null,q||0,B||0,X,I,V);if(v===false)return false}if(a==E&&mt()){switch(R){case s:z.trigger("pinchIn",[R||null,q||0,B||0,X,I,V]);if(k.pinchIn){v=k.pinchIn.call(z,u,R||null,q||0,B||0,X,I,V)}break;case o:z.trigger("pinchOut",[R||null,q||0,B||0,X,I,V]);if(k.pinchOut){v=k.pinchOut.call(z,u,R||null,q||0,B||0,X,I,V)}break}}}if(d==c){if(a===S||a===E){clearTimeout(Z);clearTimeout(et);if(Nt()&&!Lt()){Y=en();Z=setTimeout(e.proxy(function(){Y=null;z.trigger("tap",[u.target]);if(k.tap){v=k.tap.call(z,u,u.target)}},this),k.doubleTapThreshold)}else{Y=null;z.trigger("tap",[u.target]);if(k.tap){v=k.tap.call(z,u,u.target)}}}}else if(d==h){if(a===S||a===E){clearTimeout(Z);Y=null;z.trigger("doubletap",[u.target]);if(k.doubleTap){v=k.doubleTap.call(z,u,u.target)}}}else if(d==p){if(a===S||a===E){clearTimeout(Z);Y=null;z.trigger("longtap",[u.target]);if(k.longTap){v=k.longTap.call(z,u,u.target)}}}return v}function ct(){var e=true;if(k.threshold!==null){e=P>=k.threshold}return e}function ht(){var e=false;if(k.cancelThreshold!==null&&H!==null){e=Wt(H)-P>=k.cancelThreshold}return e}function pt(){if(k.pinchThreshold!==null){return q>=k.pinchThreshold}return true}function dt(){var e;if(k.maxTimeThreshold){if(B>=k.maxTimeThreshold){e=false}else{e=true}}else{e=true}return e}function vt(e,s){if(k.allowPageScroll===u||gt()){e.preventDefault()}else{var o=k.allowPageScroll===a;switch(s){case t:if(k.swipeLeft&&o||!o&&k.allowPageScroll!=v){e.preventDefault()}break;case n:if(k.swipeRight&&o||!o&&k.allowPageScroll!=v){e.preventDefault()}break;case r:if(k.swipeUp&&o||!o&&k.allowPageScroll!=m){e.preventDefault()}break;case i:if(k.swipeDown&&o||!o&&k.allowPageScroll!=m){e.preventDefault()}break}}}function mt(){var e=St();var t=xt();var n=pt();return e&&t&&n}function gt(){return!!(k.pinchStatus||k.pinchIn||k.pinchOut)}function yt(){return!!(mt()&&gt())}function bt(){var e=dt();var t=ct();var n=St();var r=xt();var i=ht();var s=!i&&r&&n&&t&&e;return s}function wt(){return!!(k.swipe||k.swipeStatus||k.swipeLeft||k.swipeRight||k.swipeUp||k.swipeDown)}function Et(){return!!(bt()&&wt())}function St(){return X===k.fingers||k.fingers===g||!x}function xt(){return V[0].end.x!==0}function Tt(){return!!k.tap}function Nt(){return!!k.doubleTap}function Ct(){return!!k.longTap}function kt(){if(Y==null){return false}var e=en();return Nt()&&e-Y<=k.doubleTapThreshold}function Lt(){return kt()}function At(){return(X===1||!x)&&(isNaN(P)||P<k.threshold)}function Ot(){return B>k.longTapThreshold&&P<y}function Mt(){return!!(At()&&Tt())}function _t(){return!!(kt()&&Nt())}function Dt(){return!!(Ot()&&Ct())}function Pt(){Q=en();G=event.touches.length+1}function Ht(){Q=0;G=0}function Bt(){var e=false;if(Q){var t=en()-Q;if(t<=k.fingerReleaseThreshold){e=true}}return e}function jt(){return!!(z.data(C+"_intouch")===true)}function Ft(e){if(e===true){z.bind(O,rt);z.bind(M,it);if(_){z.bind(_,ot)}}else{z.unbind(O,rt,false);z.unbind(M,it,false);if(_){z.unbind(_,ot,false)}}z.data(C+"_intouch",e===true)}function It(e,t){var n=t.identifier!==undefined?t.identifier:0;V[e].identifier=n;V[e].start.x=V[e].end.x=t.pageX||t.clientX;V[e].start.y=V[e].end.y=t.pageY||t.clientY;return V[e]}function qt(e){var t=e.identifier!==undefined?e.identifier:0;var n=Rt(t);n.end.x=e.pageX||e.clientX;n.end.y=e.pageY||e.clientY;return n}function Rt(e){for(var t=0;t<V.length;t++){if(V[t].identifier==e){return V[t]}}}function Ut(){var e=[];for(var t=0;t<=5;t++){e.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0})}return e}function zt(e,t){t=Math.max(t,Wt(e));U[e].distance=t}function Wt(e){if(U[e])return U[e].distance;return undefined}function Xt(){var e={};e[t]=Vt(t);e[n]=Vt(n);e[r]=Vt(r);e[i]=Vt(i);return e}function Vt(e){return{direction:e,distance:0}}function $t(){return K-J}function Jt(e,t){var n=Math.abs(e.x-t.x);var r=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+r*r))}function Kt(e,t){var n=t/e*1;return n.toFixed(2)}function Qt(){if(I<1){return o}else{return s}}function Gt(e,t){return Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)))}function Yt(e,t){var n=e.x-t.x;var r=t.y-e.y;var i=Math.atan2(r,n);var s=Math.round(i*180/Math.PI);if(s<0){s=360-Math.abs(s)}return s}function Zt(e,s){var o=Yt(e,s);if(o<=45&&o>=0){return t}else if(o<=360&&o>=315){return t}else if(o>=135&&o<=225){return n}else if(o>45&&o<135){return i}else{return r}}function en(){var e=new Date;return e.getTime()}function tn(t){t=e(t);var n=t.offset();var r={left:n.left,right:n.left+t.outerWidth(),top:n.top,bottom:n.top+t.outerHeight()};return r}function nn(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}var L=x||N||!k.fallbackToMouseEvents,A=L?N?T?"MSPointerDown":"pointerdown":"touchstart":"mousedown",O=L?N?T?"MSPointerMove":"pointermove":"touchmove":"mousemove",M=L?N?T?"MSPointerUp":"pointerup":"touchend":"mouseup",_=L?null:"mouseleave",D=N?T?"MSPointerCancel":"pointercancel":"touchcancel";var P=0,H=null,B=0,j=0,F=0,I=1,q=0,R=0,U=null;var z=e(d);var W="start";var X=0;var V=null;var J=0,K=0,Q=0,G=0,Y=0;var Z=null,et=null;try{z.bind(A,nt);z.bind(D,st)}catch(tt){e.error("events not supported "+A+","+D+" on jQuery.swipe")}this.enable=function(){z.bind(A,nt);z.bind(D,st);return z};this.disable=function(){ut();return z};this.destroy=function(){ut();z.data(C,null);return z};this.option=function(t,n){if(k[t]!==undefined){if(n===undefined){return k[t]}else{k[t]=n}}else{e.error("Option "+t+" does not exist on jQuery.swipe.options")}return null};}var t="left",n="right",r="up",i="down",s="in",o="out",u="none",a="auto",f="swipe",l="pinch",c="tap",h="doubletap",p="longtap",d="hold",v="horizontal",m="vertical",g="all",y=10,b="start",w="move",E="end",S="cancel",x="ontouchstart"in window,T=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,N=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,C="TouchSwipe";var k={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"label, button, input, select, textarea, .noSwipe"};e.fn.swipe=function(t){var n=e(this),r=n.data(C);if(r&&typeof t==="string"){if(r[t]){return r[t].apply(this,Array.prototype.slice.call(arguments,1))}else{e.error("Method "+t+" does not exist on jQuery.swipe")}}else if(!r&&(typeof t==="object"||!t)){return L.apply(this,arguments)}return n};e.fn.swipe.defaults=k;e.fn.swipe.phases={PHASE_START:b,PHASE_MOVE:w,PHASE_END:E,PHASE_CANCEL:S};e.fn.swipe.directions={LEFT:t,RIGHT:n,UP:r,DOWN:i,IN:s,OUT:o};e.fn.swipe.pageScroll={NONE:u,HORIZONTAL:v,VERTICAL:m,AUTO:a};e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:g}})
